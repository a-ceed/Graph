<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style type="text/css">

.megabox {
  width: 1000px;
  height: 50px;
  border: 4px double black; 
  position:relative;
}
#box1 {
  width: 80%;
  height: 100%;
  background-color: #180;
  position: absolute;
  bottom: 0px;
}

#box2 {
  width: 1%;
  height: 100%;
  background-color: #180;
  position: absolute;
  bottom: 0px;
}

#box3 {
  width: 1%;
  height: 100%;
  background-color: #180;
  position: absolute;
  bottom: 0px;
}

  </style>

</head>


<body>



<div class="megabox">
    <div id="box1"></div>
</div>

<div class="megabox">
    <div id="box2"></div>
</div>

<div class="megabox">
    <div id="box3"></div>
</div>


<button onclick="play()">Play</button>

<script>
"use strict"

let startstatic1 = box1.style.width = 70 + '%';
let startstatic2 = box2.style.width = 40 + '%';
let startstatic3 = box3.style.width = 0 + '%';

let numstatic1;
let numstatic2;
let numstatic3;

let endstatic1;
let endstatic2;
let endstatic3;



function pererabotka() {

  let startstatic2 = box2.style.width;
  numstatic2 = startstatic2.slice(-3, -1)
  let endstatic2 = Number(numstatic2)  -1;
  box2.style.width = endstatic2 + '%';

  
  let startstatic3 = box3.style.width;
  numstatic3 = startstatic3.slice(-3, -1)
  let endstatic3 = Number(numstatic3)  +1;
  box3.style.width = endstatic3 + '%';


}

function proizvodstvo() {

  let startstatic1 = box1.style.width;
  numstatic1 = startstatic1.slice(-3, -1)
  let endstatic1 = Number(numstatic1)  -1;
  box1.style.width = endstatic1 + '%';

  
  let startstatic3 = box3.style.width;
  numstatic3 = startstatic3.slice(-3, -1)
  let endstatic3 = Number(numstatic3)  +1;
  box3.style.width = endstatic3 + '%';
}


function progress() {

while (startstatic2 != 0) pererabotka();




}


function play () {
setInterval(progress, 100);
setTimeout(() => { clearInterval(progress); alert('stop'); }, 9000);
}


  </script>



</body>
</html>